#-------------------------------------------------------------------------#
#                        _       _ _____                    __ _          #
#      _ __   ___  _ __ ( )___  (_)___ /    ___ ___  _ __  / _(_) __ _    #
#     | '_ \ / _ \| '_ \|// __| | | |_ \   / __/ _ \| '_ \| |_| |/ _` |   #
#     | |_) | (_) | |_) | \__ \ | |___) | | (_| (_) | | | |  _| | (_| |   #
#     | .__/ \___/| .__/  |___/ |_|____/   \___\___/|_| |_|_| |_|\__, |   #
#     |_|         |_|                                            |___/    #
#                                                                         #
#-------------------------------------------------------------------------#

# Knowing vim bindings is probably mandatory for this config lol

# BASE PACKAGES: autotiling nitrogen picom maim xclip xdotool rofi kitty
# RECOMMENDED PACKAGES: brave (rust toolchain)
# NEEDED FONT: CaskaydiaCove Nerd Font

# ------------- #
# ({VARIABLES}) #
# ------------- #

# Here you can set variables influencing audio steps, terminal, gap size etc..
set $terminal "kitty" 
# Set your browser for the shortcut
set $browser "brave"
# Mod1 Being Alt and Mod4 Being Win
set $mod Mod1
set $volume_steps 5
set $font_size 14
set $inner_gaps_size 10
set $outer_gaps_size 1

# ------------------------- #
#                           #
# CUSTOM CONFIGS START HERE #
#                           #
# ------------------------- #

# Start the specified Terminal 
bindsym $mod+Return exec --no-startup-id $terminal

# Custom window font
font pango:CaskaydiaCove Nerd Font $font_size

#Start all custom services (nitrogen, autotiling, picom, polybar):
exec_always --no-startup-id picom
exec_always --no-startup-id nitrogen --restore
exec_always --no-startup-id autotiling
exec_always --no-startup-id $HOME/.config/polybar/launch.sh

bindsym $mod+d exec "rofi -modi drun,run -show drun"

# Resizing by 1
bindsym $mod+Ctrl+l resize shrink width 1 px or 1 ppt
bindsym $mod+Ctrl+k resize grow height 1 px or 1 ppt
bindsym $mod+Ctrl+j resize shrink height 1 px or 1 ppt
bindsym $mod+Ctrl+h resize grow width 1 px or 1 ppt

# Resizing by 10
bindsym $mod+Ctrl+Shift+l resize shrink width 10 px or 10 ppt
bindsym $mod+Ctrl+Shift+k resize grow height 10 px or 10 ppt
bindsym $mod+Ctrl+Shift+j resize shrink height 10 px or 10 ppt 
bindsym $mod+Ctrl+Shift+h resize grow width 10 px or 10 ppt

# Audio control in Pulseaudio (Pipewire has a Pulseaudio interface 'pipewire-pulseaudio'
#                              This is needed for this to work)
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +$volume_steps% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -$volume_steps% && $refresh_i3status
bindsym XF86AudioMute        exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute     exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Screenshots
exec_always --no-startup-id mkdir ~/Screenshots
bindsym Print exec --no-startup-id maim "/home/$USER/Screenshots/$(date).png"
bindsym Ctrl+Print exec --no-startup-id maim --window $(xdotool getactivewindow) "/home/$USER/Screenshots/$(date).png"
bindsym Shift+Print exec --no-startup-id maim --select "/home/$USER/Screenshots/$(date).png"

# Apps ((nvm it work) why no work)
bindsym $mod+Shift+d exec --no-startup-id rustup doc
bindsym $mod+Shift+w exec --no-startup-id $browser

# Assign apps to workspaces
# (Terminals)
assign [class="kitty"] 1
assign [class="Alacritty"] 1

# (Browsers)
assign [class="Brave"] 2
assign [class="Firefox"] 2
assign [class="Chromium"] 2

# (Games)
assign [class="Lutris"] 3
assign [class="Steam"] 3

# (Chatting Services)
assign [class="Discord"] 4
assign [class="Vencord"] 4
assign [class="Vesktop"] 4

# (virtual machines)
assign [class="virt-manager"] 5
assign [class="Virt-manager"] 5
#(rose: ea9a97)

# Custom border colours (text is not neccessary)
# class                 border  backgr. (     ) indica. child_border
client.focused          #4c4f69 #4c4f69 #ffffff #f6c177 #4c4f69
client.focused_inactive #ea9a97 #4c4f69 #ffffff #4c4f69 #4c4f69
client.unfocused        #4c4f69 #000000 #ffffff #ea9a97 #4c4f69
client.urgent           #4c4f69 #4c4f69 #ffffff #ea9a97 #179299

# Custom gaps + Borders 
smart_borders on
for_window [class="^.*"] border pixel 2
gaps inner $inner_gaps_size
gaps outer $outer_gaps_size

# ----------------------- #
#                         #
# CUSTOM CONFIGS END HERE #
#                         #
# ----------------------- #

# Ignore the rest of the file if you don't need any other 
# customization options

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3
exec --no-startup-id xss-lock --transfer-sleep-lock -- i3lock --nofork
exec --no-startup-id nm-applet

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Switching to workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 0

# Reload config, Restart config, Logout
bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec --no-startup-id "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"

exec --no-startup-id $terminal

# give me a terminal when i start pls (not when i reload tho)


# ----------------------------------- #
# DEPRECATED (Why would you use this) #
# ----------------------------------- #

# Set Background on boot (feh package is necessary)
# exec_always --no-startup-id /usr/bin/feh --bg-scale ~/Pictures/wallhaven-6o2qjw.png
# exec --no-startup-id compton

# Compton is faster but nitrogen is more convenient (choose your tradeoff)
# why did i compare compton with nitrogen bruh

#  toggle tiling / floating
# bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
# bindsym $mod+space focus mode_toggle
